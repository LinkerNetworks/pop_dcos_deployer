{
   "id":"/linkerdcos",
   "groups":[
      {
         "id":"/linkerdcos/cluster",
         "apps":[
            {
               "id":"/linkerdcos/cluster/clustermgmt",
               "instances":1,
               "cpus":0.5,
               "mem":512,
               "dependencies":[
                  "/linkerdcos/cluster/mongodb"
               ],
               "labels":{
                  "HAPROXY_GROUP":"linkermgmt"
               },
               "container":{
                  "type":"DOCKER",
                  "docker":{
                     "image":"linkerrepository/linkerdcos_clustermgmt:latest",
                     "network":"BRIDGE",
                     "portMappings":[
                        {
                           "containerPort":10002,
                           "hostPort":0,
                           "servicePort":10002,
                           "protocol":"tcp"
                        }
                     ],
                     "volumes":[
                        {
                           "containerPath":"/usr/local/bin",
                           "hostPath":"/usr/local/bin",
                           "mode":"RW"
                        }
                     ],
                     "privileged":true,
                     "forcePullImage":true
                  }
               },
               "env":{
                  "MONGODB_NODES":"xxxx,xxxx,xxx"
               },
               "constraints":[
                  [
                     "hostname",
                     "UNIQUE"
                  ]
               ]
            },
            {
               "id":"/linkerdcos/cluster/usermgmt",
               "instances":1,
               "cpus":0.5,
               "mem":512,
               "dependencies":[
                  "/linkerdcos/cluster/mongodb"
               ],
               "labels":{
                  "HAPROXY_GROUP":"linkermgmt"
               },
               "container":{
                  "type":"DOCKER",
                  "docker":{
                     "image":"linkerrepository/linkerdcos_usermgmt:latest",
                     "network":"BRIDGE",
                     "portMappings":[
                        {
                           "containerPort":10001,
                           "hostPort":0,
                           "servicePort":10001,
                           "protocol":"tcp"
                        }
                     ],
                     "volumes":[
                        {
                           "containerPath":"/usr/local/bin",
                           "hostPath":"/usr/local/bin",
                           "mode":"RW"
                        }
                     ],
                     "privileged":true,
                     "forcePullImage":true
                  }
               },
               "env":{
                  "MONGODB_NODES":"xxxx,xxxx,xxx"
               },
               "constraints":[
                  [
                     "hostname",
                     "UNIQUE"
                  ]
               ]
            },
            {
               "id":"/linkerdcos/cluster/mongodb",
               "cpus":0.5,
               "mem":1024,
               "instances":1,
               "container":{
                  "type":"DOCKER",
                  "docker":{
                     "image":"linkerrepository/linkerdcos_mongodb_repl:latest",
                     "network":"HOST",
                     "volumes":[
                        {
                           "containerPath":"/data/mongokey",
                           "hostPath":"/linker/key",
                           "mode":"RO"
                        },
                        {
                           "containerPath":"/data/db",
                           "hostPath":"/opt",
                           "mode":"RW"
                        }
                     ],
                     "privileged":true,
                     "forcePullImage":true
                  }
               },
               "constraints":[
                  [
                     "hostname",
                     "UNIQUE"
                  ]
               ],
               "env":{
                  "MONGODB_NODES":"xxxx,xxxx,xxx"
               }
            }
         ]
      },
      {
         "id":"/linkerdcos/portal",
         "apps":[
            {
               "id":"/linkerdcos/portal/ui",
               "cpus":0.5,
               "mem":2048,
               "instances":3,
               "labels":{
                  "HAPROXY_GROUP":"linkermgmt"
               },
               "container":{
                  "type":"DOCKER",
                  "docker":{
                     "network":"BRIDGE",
                     "portMappings":[
                        {
                           "containerPort":3000,
                           "hostPort":0,
                           "servicePort":10010,
                           "protocol":"tcp"
                        }
                     ],
                     "image":"linkerrepository/linkerdcos_portal:latest",
                     "privileged":true,
                     "forcePullImage":true
                  }
               },
               "constraints":[
                  [
                     "hostname",
                     "UNIQUE"
                  ]
               ]
            },
            {
               "id":"/linkerdcos/portal/redis",
               "cpus":0.5,
               "mem":1024,
               "instances":1,
               "labels":{
                  "HAPROXY_GROUP":"linkermgmt"
               },
               "container":{
                  "type":"DOCKER",
                  "docker":{
                     "image":"linkerrepository/linkerdcos_redis:latest",
                     "network":"BRIDGE",
                     "portMappings":[
                        {
                           "containerPort":6379,
                           "hostPort":0,
                           "servicePort":10011,
                           "protocol":"tcp"
                        }
                     ],
                     "privileged":true,
                     "forcePullImage":true
                  }
               },
               "constraints":[
                  [
                     "hostname",
                     "UNIQUE"
                  ]
               ]
            }
         ]
      },
      {
         "id":"goproxy",
         "apps":[
            {
               "id":"deployer",
               "cpus":0.5,
               "mem":1024,
               "instances":3,
               "labels":{
                  "HAPROXY_GROUP":"linkermgmt"
               },
               "container":{
                  "type":"DOCKER",
                  "docker":{
                     "network":"BRIDGE",
                     "portMappings":[
                        {
                           "containerPort":10003,
                           "hostPort":0,
                           "servicePort":10003,
                           "protocol":"tcp"
                        }
                     ],
                     "image":"linkerrepository/linker_dcos_deployer:latest",
                     "privileged":true,
                     "forcePullImage":true
                  }
               },
               "constraints":[
                  [
                     "hostname",
                     "UNIQUE"
                  ]
               ]
            }
         ]
      }
   ]
}
